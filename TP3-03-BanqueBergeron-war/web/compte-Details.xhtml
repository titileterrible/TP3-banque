<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="./template_default.xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:="http://www.w3.org/1999/xhtml">

    <ui:define name="titrePage">Details Compte - <h:outputText value="#{compteBancaireMBean.details.nom}"></h:outputText></ui:define>

    <ui:define name="content">
        <f:view>
            <h:form>
                
                <p:panel>
                    <h1 style="padding-bottom:5px; margin-bottom:10px;">
                        <h:outputText value="Informations du Compte N°#{compteBancaireMBean.details.id} - ( Solde #{compteBancaireMBean.details.solde}0 € )"/>
                    </h1>
                    <h:outputLabel value="Nom:" for="nom" />
                    &nbsp;
                    <p:inputText id="nom" value="#{compteBancaireMBean.details.nom}" title="Nom" />
                    &nbsp;
                    <p:commandButton icon="ui-icon-pencil" id="update" value="Modifier Compte" action="#{compteBancaireMBean.update}"/>  
                    &nbsp;
                    <p:commandButton icon="ui-icon-close" id="delete" value="Supprimer Compte" onclick="confirmation.show()"/>    
                    &nbsp;
                    <p:commandButton icon="ui-icon-minus" id="retrait" action="#{compteBancaireMBean.setCompteBancaire(details)}" value="Enregistrer un retrait" onclick="(retrait).show()"/>
                    &nbsp;
                    <p:commandButton icon="ui-icon-plus" id="depot" action="#{compteBancaireMBean.setCompteBancaire(details)}" value="Enregistrer un dépôt" onclick="depot.show()"/>
                    &nbsp;
                    
                
                    <p:dialog header="Enregistrer un retrait" widgetVar="retrait" modal="true" height="40" resizable="false">
                              <h:outputText style="margin-right: 5px;" value="Montant :" />
                              <h:inputText  required="true" value="" title="Montant" />
                              <f:facet name="footer">  
                                   <p:commandButton icon="ui-icon-check" value="Valider" update="listOperations" action="#{compteBancaireMBean.retrait1()}"/>  
                              </f:facet>  
                   </p:dialog>
                
                   <p:dialog header="Enregistrer un dépôt" widgetVar="depot" modal="true" height="40" resizable="false">
                                    <h:outputText style="margin-right: 5px;" value="Montant :" />
                                    <h:inputText required="true" value="" title="Montant" />
                                    <f:facet name="footer">  
                                        <p:commandButton icon="ui-icon-check" value="Valider" update="listOperations" action="#{compteBancaireMBean.depot1()}"/>  
                                    </f:facet>             
                   </p:dialog>

                </p:panel>
                
                
                
                <br/>
                
                <p:panel>
                    <h1 style="padding-bottom:5px; margin-bottom:10px;">
                        <h:outputText value="Liste des opérations du Compte N°#{compteBancaireMBean.details.id} - ( #{compteBancaireMBean.details.nom} )"/>
                    </h1>
  
                <!--
                <h1><h:outputText value="Détails des opérations pour le compte numéro #{compteBancaireMBean.details.id} de #{compteMBean.details.nom}"/></h1><br/>
                        <h:commandLink id="printId" value="Imprimer le tableau" style="float: right;"  styleClass="printButton">
                            <p:printer target="listOperations" />
                        </h:commandLink>
                -->
                        <p:dataTable value="#{compteBancaireMBean.operations}" id="listOperations" var="item">
                            <p:column sortBy="#{item.dateOp}">
                                <f:facet name="header">
                                    <h:outputText value="Date"/>
                                </f:facet>
                                <h:outputText value="#{item.dateOp}"/>
                            </p:column>
                            <p:column sortBy="#{item.commentOp}">
                                <f:facet name="header">
                                    <h:outputText value="Commentaire"/>
                                </f:facet>
                                <h:outputText value="#{item.commentOp}"/>
                            </p:column>
                            <p:column sortBy="#{item.montantOp}">
                                <f:facet name="header">
                                    <h:outputText value="Montant"/>
                                </f:facet>
                                <h:outputText value="#{item.montantOp}"/>
                            </p:column>
                        </p:dataTable>
                        <br/>
                
                
                
                
                </p:panel>
                
                <br/>
                
                
                
                
                <div style="margin-top: 10px;">
                    <p:commandButton icon="ui-icon-arrowthick-1-w" id="back" value="Retour" action="#{compteBancaireMBean.list}"/>  
                </div>

                <p:confirmDialog id="confirmDialog" message="Etes-vous sur?"  header="Suppression compte" severity="alert" widgetVar="confirmation">  

                    <p:commandButton id="confirm" value="Supprimer" action="#{compteBancaireMBean.delete}" />  
                    <p:commandButton id="decline" value="Annuler" onclick="confirmation.hide()" type="button" />   

                </p:confirmDialog> 

            </h:form>


        </f:view>

    </ui:define>

</ui:composition>



